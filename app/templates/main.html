{% extends "base.html" %}
{% block title %}Главная{% endblock %}

{% block content %}

<!-- Сайдбар -->
<div id="sidebar" class="sidebar">
  <aside class="menu">
    <p class="menu-label">Меню</p>
    <ul class="menu-list">
      <li><a href="#" data-section="Расчет нагрузки" class="menu-item">Расчет нагрузки</a></li>
      <li><a href="#" data-section="Инструкция" class="menu-item">Инструкция</a></li>
      {% if is_admin %}
      <li><a href="#" data-section="Настройки" class="menu-item">Настройки</a></li>
      {% endif %}
    </ul>
  </aside>
</div>

<!-- Навигационная панель -->
<nav class="navbar is-light has-shadow" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <!-- Бургер-иконка -->
    <a role="button" class="navbar-burger" id="burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
    <!-- Заголовок текущего раздела справа от бургер-иконки -->
    <span class="navbar-item is-size-4" id="section-title">Расчет нагрузки</span>
  </div>

  <div class="navbar-end">
    <!-- ФИО пользователя -->
    <div class="navbar-item">{{ fio }}</div>
    <!-- Кнопка «Выйти» -->
    <div class="navbar-item">
      <a class="button is-light" href="{{ url_for('auth.logout') }}">
        Выйти
      </a>
    </div>
  </div>
</nav>

<!-- Основной контент -->
<div class="main-content" id="main-content">
  <section class="section">
    <div class="container">
      <h1 class="title" id="main-header">Добро пожаловать, {{ fio }}!</h1>
      <!-- Тут будет подгружаться контент выбранного раздела -->
    </div>
  </section>
</div>

<!-- Скрипт для работы бургер-меню -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const burger  = document.getElementById('burger');
  const sidebar = document.getElementById('sidebar');
  const content = document.getElementById('main-content');
  const title   = document.getElementById('section-title');
  const header  = document.getElementById('main-header');
  const items   = document.querySelectorAll('.menu-item');

  // Тоггл сайдбара
  burger.addEventListener('click', () => {
    sidebar.classList.toggle('is-active');
    content.classList.toggle('shifted');
  });

  // Обработка клика по каждому пункту меню
  items.forEach(item => {
    item.addEventListener('click', e => {
      e.preventDefault();
      const sec = item.dataset.section;
      title.textContent  = sec;
      header.textContent = sec;
      sidebar.classList.remove('is-active');
      content.classList.remove('shifted');
      // TODO: подгружать контент секции через HTMX, если нужно
    });
  });
});
</script>

{% endblock %}
